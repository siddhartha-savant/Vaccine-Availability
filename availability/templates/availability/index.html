{% extends 'availability/base.html' %}

{% block content %}
  <h1>Vaccine Availability</h1>

  <form method="post">
  <label for="state_name">Choose your respective state:</label>
  <select name= "state_name" id="state_name" onchange="getSelected(this)">
    <option value="">--Please choose an option--</option>
  {% for key,value in state_dist_dict %}
    <option value="{{ key }}">{{ key }}</option>
    {% endfor %}
  </select>
    </form>

  <script>
  function getSelected(select_object) {
    var value = select_object.value;
}
  </script>

  <form method="post">
  <label for="district_name">Choose your respective district:</label>
  <select name= "district_name" id="district_name">
    <option value="">--Please choose an option--</option>
    {% if value != 0 %}
      {% for district in state_dist_dict[value] %}
         <option value="{{ district }}">{{ district }}</option>
      {% endfor %}
    {% endif %}
  </select>
  </form>

  <form method="get">
    <input type="text" name="district_id">
    <button type="submit">Check for availability</button>
  </form>

  {% if batch_list %}
  <table>
    <tr>
      <th>Center Location</th>
      <th>Date</th>
      <th>Age Limit</th>
      <th>Capacity</th>
      <th>Vaccine</th>
    </tr>
    {% for batch in batch_list %}
    <tr>
      {% for key, value in batch.items %}
        {% if key == "name" %}
          <td>
          {% for x in value %}
            {{ x }} <br/>
          {% endfor %}
          </td>
        {% else %}
        <td> {{ value }} </td>
        {% endif %}
      {% endfor %}
    </tr>
    {% endfor %}
  </table>
{% endif %}
{% endblock content %}